<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>📊 LSA Agent</title>
  <meta name="description" content="Liquidity & Solvency Analysis - Powered by finance agent v1.3" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="https://chanthr.github.io/styles.css?v=1" />
</head>
<body>
  <div class="wrap">
    <h1>📊 Liquidity & Solvency Analysis</h1>
    <p class="muted">Powered by finance agent v1.3</p>

    <div class="card">
      <div class="row align-center">
        <input id="ticker" class="flex-1" placeholder="e.g. AAPL / 005930.KS / 7203.T" />
        <select id="lang">
          <option value="en">English</option>
          <option value="ko">Korean</option>
        </select>
        <button id="go" type="button">🔎 Analyse</button>
      </div>

      <div class="row align-center mt-8 opt-row">
        <label class="checkbox"><input type="checkbox" id="opt-narr" /> <span>Narrative</span></label>
        <label class="checkbox"><input type="checkbox" id="opt-pred" /> <span>Predict</span></label>
        <label class="checkbox"><input type="checkbox" id="opt-sum" /> <span>Analyst by AI</span></label>
        <label class="checkbox"><input type="checkbox" id="opt-news" /> <span>Media Analysis</span></label>
      </div>

      <p class="muted mt-8">For KR/JP/HK Stocks, must end with .KS / .T / .HK</p>
      <p class="muted mt-8">Narrative is currently not available at the moment.</p>
      <p class="muted mt-8">It may take few minutes for API to be activated.</p>
      <p class="muted">
        API: <span id="health">Checking…</span> • <span id="llm">Checking…</span>
        <a href="#" id="reset-site" style="margin-left:8px;">Update Agent</a>
      </p>
    </div>

    <div id="out" class="card hidden">
      <h2 id="title">결과</h2>
      <div id="meta" class="muted mb-8"></div>

      <h3>💧 Liquidity</h3>
      <div id="liq" class="grid grid-3"></div>

      <h3>🛡️ Solvency</h3>
      <div id="sol" class="grid grid-3"></div>

      <!-- 📝 Narrative -->
      <section id="narr-section" class="hidden">
        <h3>📝 Narrative</h3>
        <div id="narr" class="muted"></div>
      </section>

      <!-- 🔮 Prediction -->
      <section id="pred-section" class="hidden">
        <h3>🔮 Prediction (1-Day)</h3>
        <div id="pred" class="grid grid-3"></div>
      </section>

      <!-- 🧠 LLM Summary (single green border) -->
      <section id="sum-section" class="hidden">
        <h3>🧠 Analyst Summary (powered by AI)</h3>
        <div id="sum" class="summary muted"></div>
      </section>

      <!-- 🗞 News (analysis card only) -->
      <section id="news-section" class="hidden">
        <h3>🗞 Current Trends</h3>
        <div id="news"></div>
      </section>

      <div class="json-toggle mt-12">
        <label class="checkbox">
          <input type="checkbox" id="toggle-json" />
          <span>Show JSON</span>
        </label>
      </div>
      <div id="jsonWrap" class="json-wrap hidden">
        <pre id="raw"></pre>
      </div>
    </div>
  </div>

  <footer class="watermark">© 2025 Powered by @chnxthr</footer>

  <!-- Patch Notes data -->
  <script>
    window.PATCH_NOTES = [
      {
        version: "v1.3",
        date: "2025-09-01",
        title: "To report bugs, telegram @chnxthr",
        changes: [
          { kind: "added",   text: "Media Sentiment Analysis" },
          { kind: "added",   text: "Analyst Summary" },
          { kind: "changed", text: "Narrative Section is currently unavailable." },
          { kind: "fixed",   text: "Removed duplicate green border on Analyst Summary." }
        ]
      }
    ];
  </script>

  <!-- App logic -->
  <script src="https://chanthr.github.io/app.js?v=4" defer></script>
</body>
</html>
